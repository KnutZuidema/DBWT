{% extends 'base.html' %}
{% block head %}
    {{ super() }}
    <link rel="stylesheet" href="/static/css/details.css">
    <script>
        $(function () {
            $('#route').attr('value', window.location.pathname);
            console.log(window.location.pathname)
        })
    </script>
{% endblock %}
{% block title %}
    {{ product.name }}
{% endblock %}
{% block content %}
    <div class="row">
        <div class="col-7 offset-3" id="title">
            <h1>Details für "{{ product.name }}"</h1>
        </div>
        <div class="col-2 price">
            Gast-Preis
        </div>
    </div>
    <div class="row">
        <div class="col-3">
            {% if not current_user.authenticated %}
                <div class="col" id="login">
                    <p><span>Login</span></p>
                    <form method="post" action="/login">
                        <div class="form-group">
                            <input type="text" name="username" class="form-control"
                                   placeholder="Benutzername">
                        </div>
                        <div class="form-group">
                            <input type="password" name="password" class="form-control"
                                   placeholder="Passwort">
                        </div>
                        <input type="hidden" name="route" id="route">
                        <button type="submit" class="btn">
                            <i class="fas fa-sign-in-alt"></i>
                            Anmelden
                        </button>
                    </form>
                </div>
            {% endif %}
        </div>
        <div class="col-7" id="banner"
             style="background-image: url(/static/assets/{{ product.image }});"></div>
        <div class="col-2">
            <div class="row">
                <div class="col price">
                    {{ product.price }}€
                </div>
            </div>
            <div class="row my-auto" id="order_row">
                <div class="col">
                    <button class="btn" id="order_button">
                        <i class="fas fa-utensils"></i>
                        Vorbestellen
                    </button>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-3">
            {% if not current_user.authenticated %}
                Melden Sie sich jetzt an,
                um die wirklich viel günstigeren Preise für Mitarbeiter oder Studenten zu sehen.
            {% endif %}
        </div>
        <div class="col-7">
            <ul class="nav nav-tabs" role="tablist">
                <li class="nav-item">
                    <a class="nav-link active" data-toggle="tab" href="#description"
                       role="tab">Beschreibung</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-toggle="tab" href="#ingredients"
                       role="tab">Zutaten</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-toggle="tab" href="#review"
                       role="tab">Bewertung</a>
                </li>
            </ul>
            <div class="tab-content">
                <div class="tab-pane show active" id="description" role="tabpanel">
                    <p>{{ product.description }}</p>
                </div>
                <div class="tab-pane" id="ingredients" role="tabpanel">
                    <table class="table">
                        <thead>
                        <tr>
                            <th>Zutat</th>
                            <th>Menge</th>
                        </tr>
                        </thead>
                        <tbody>
                        {% for ingredient, amount in product.ingredients.items() %}
                            <tr>
                                <td>{{ ingredient }}</td>
                                <td>{{ amount }}</td>
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                </div>
                <div class="tab-pane" id="review" role="tabpanel">
                    <form method="post" action="http://bc5.m2c-lab.fh-aachen.de/form.php">
                        <div class="form-group">
                            <label for="benutzer">Benutzer</label>
                            <input type="text" name="benutzer" class="form-control" id="benutzer">
                        </div>
                        <div class="form-group">
                            <label for="bemerkung">Bemerkung</label>
                            <textarea class="form-control" name="bemerkung" id="bemerkung">
                            </textarea>
                        </div>
                        <div class="form-group">
                            <label for="bewertung">Bewertung</label>
                            <input type="range" name="bewertung" min="1" max="5" id="bewertung"
                                   class="form-control">
                            <small class="for-text text-muted">
                                Deine Daten werden nicht an Dritte weitergegeben
                            </small>
                        </div>
                        <input type="hidden" name="matrikel" value="3152047">
                        <input type="hidden" name="kontrolle" value="zui">
                        <button type="submit" class="btn">Absenden</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
